<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>COE301 LAB NOTES</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="solarized-dark.min.css" />
<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">COE301 LAB NOTES</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orge6fae12">Resources</a></li>
<li><a href="#org3da1676">MIPS assembly</a>
<ul>
<li><a href="#org5cbe54b">Introduction</a>
<ul>
<li><a href="#org8f6f624">Mars simulator Setup</a></li>
<li><a href="#orga805c2e">Hello, World</a></li>
<li><a href="#org82482ea">More about MIPS assembly</a></li>
<li><a href="#org5be2bdf">Basic Syscalls</a></li>
<li><a href="#orga9079c1">Registers</a></li>
</ul>
</li>
<li><a href="#org3aae92a">instructions</a></li>
<li><a href="#org6703c68">Labs</a>
<ul>
<li><a href="#org91d36de">LAB 3</a></li>
<li><a href="#orgf44e877">LAB 4</a></li>
<li><a href="#org4c1e1c5">LAB 5</a></li>
<li><a href="#orgc7f7a5f">LAB 6</a></li>
<li><a href="#org6081bc3">LAB 7</a></li>
<li><a href="#org4dd7ba3">LAB 8</a></li>
</ul>
</li>
<li><a href="#org18f2725">Homework</a>
<ul>
<li><a href="#org9875646">HM1</a></li>
</ul>
</li>
<li><a href="#org3b05b48">Useful Macros</a></li>
</ul>
</li>
</ul>
</div>
</div>
<blockquote>
<ul class="org-ul">
<li>I recommend viewing this website on a non mobile device</li>
<li>Github repositary of this document <a href="https://github.com/Airbus5717/coe301">repo</a> which contains Term221 resources too</li>
<li>If you find any issue, report it here <a href="https://github.com/Airbus5717/coe301/issues">report issue</a></li>
</ul>
</blockquote>

<div id="outline-container-orge6fae12" class="outline-2">
<h2 id="orge6fae12">Resources</h2>
<div class="outline-text-2" id="text-orge6fae12">
<ul class="org-ul">
<li>Dr. Mudawar resources <a href="https://faculty.kfupm.edu.sa/coe/mudawar/coe301/lectures/index.htm">slides, examples etc.</a></li>
<li>MIPS syscalls <a href="https://courses.missouristate.edu/kenvollmar/mars/help/syscallhelp.html">link</a></li>
<li>Mars mips simulator <a href="https://courses.missouristate.edu/KenVollmar/mars/download.htm">link</a></li>
<li>Dr. Mudawwar&rsquo;s videos <a href="https://youtube.com/playlist?list=PLeurb_BIjrxjSmBhm_h3TkN8pWxM_1ViU">link</a></li>
<li>MIPS assembly reference <a href="https://uweb.engr.arizona.edu/~ece369/Resources/spim/MIPSReference.pdf">arizona uni</a></li>
<li>Mips assembly videos <a href="https://www.youtube.com/playlist?list=PL1C2GgOjAF-KYdV5bH-xzoybEHreDZ3Kh">Padraic Edgington</a></li>
<li>Mips assembly videos <a href="https://www.youtube.com/playlist?list=PL5b07qlmA3P6zUdDf-o97ddfpvPFuNa5A">Amell Peralta</a></li>
<li>Mips assembly Slides from oregon state uni <a href="https://web.engr.oregonstate.edu/~walkiner/cs271-wi13/slides/">class 2013</a></li>
<li>MIPS online editor/simulator <a href="https://cpulator.01xz.net/?sys=mipsr5-spim">CPULATOR</a></li>
<li>MIPS Manual I <a href="https://faculty.kfupm.edu.sa/coe/mudawar/coe301/tools_manuals/MIPS32Vol1.Architecture.pdf">MANUAL I</a></li>
<li>MIPS Manual II <a href="https://faculty.kfupm.edu.sa/coe/mudawar/coe301/tools_manuals/MIPS32Vol2.InstructionSet.pdf">MANUAL II</a></li>
</ul>
<hr />
</div>
</div>

<div id="outline-container-org3da1676" class="outline-2">
<h2 id="org3da1676">MIPS assembly</h2>
<div class="outline-text-2" id="text-org3da1676">
</div>
<div id="outline-container-org5cbe54b" class="outline-3">
<h3 id="org5cbe54b">Introduction</h3>
<div class="outline-text-3" id="text-org5cbe54b">
</div>
<div id="outline-container-org8f6f624" class="outline-4">
<h4 id="org8f6f624">Mars simulator Setup</h4>
<div class="outline-text-4" id="text-org8f6f624">
<ol class="org-ol">
<li>File (or Ctrl-N) -&gt; New File</li>
<li>Copy paste the code below</li>
<li>Save the file (or Ctrl-S)</li>
<li>Run (or F3) -&gt; Assemble</li>
<li>If assembling was successful then continue</li>
<li>Go (or F5) to run the whole program at once</li>
</ol>
</div>
</div>


<div id="outline-container-orga805c2e" class="outline-4">
<h4 id="orga805c2e">Hello, World</h4>
<div class="outline-text-4" id="text-orga805c2e">
<div class="org-src-container">
<pre class="src src-mips"><span style="color: #5B6268;"># </span><span style="color: #98be65; font-weight: bold;">NOTE:</span><span style="color: #5B6268;"> Hello, World in assembly</span>
<span style="color: #51afef; font-weight: bold;">.globl</span> main

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">data segment (global variables)</span>
<span style="color: #51afef; font-weight: bold;">.data</span>
<span style="color: #c678dd;">msg:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Hello, World\n"</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">asciiz includes the null terminator (\0) in string</span>

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">code segment</span>
<span style="color: #51afef; font-weight: bold;">.text</span>
<span style="color: #c678dd;">main:</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string msg</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">4 is the syscall number for print string</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg <span style="color: #5B6268;"># </span><span style="color: #5B6268;">loads address of msg to $a0</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>   <span style="color: #5B6268;"># </span><span style="color: #5B6268;">loads immediate (4) to $v0</span>
    <span style="color: #51afef;">syscall</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">exit</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">exit syscall is 10</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span> 
    <span style="color: #51afef;">syscall</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org82482ea" class="outline-4">
<h4 id="org82482ea">More about MIPS assembly</h4>
<div class="outline-text-4" id="text-org82482ea">
<p>
MIPS assembly was introduced in 1986 and there are different versions (I, I, &#x2026;, MIPS32, MIPS64).
</p>
</div>
</div>

<div id="outline-container-org5be2bdf" class="outline-4">
<h4 id="org5be2bdf">Basic Syscalls</h4>
<div class="outline-text-4" id="text-org5be2bdf">
<p>
Full reference MIPS syscalls <a href="https://courses.missouristate.edu/kenvollmar/mars/help/syscallhelp.html">link</a>
</p>
</div>
</div>

<div id="outline-container-orga9079c1" class="outline-4">
<h4 id="orga9079c1">Registers</h4>
<div class="outline-text-4" id="text-orga9079c1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Register</td>
<td class="org-left">Number</td>
<td class="org-left">Usage</td>
<td class="org-left">Avoid</td>
</tr>

<tr>
<td class="org-left">$zero</td>
<td class="org-left">$0</td>
<td class="org-left">Always zero</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$at</td>
<td class="org-left">$1</td>
<td class="org-left">Assembler temporary register</td>
<td class="org-left">true</td>
</tr>

<tr>
<td class="org-left">$v0-$v1</td>
<td class="org-left">$2-$3</td>
<td class="org-left">functions results</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$a0-$a3</td>
<td class="org-left">$4-$7</td>
<td class="org-left">function arguments</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$t0-$t7</td>
<td class="org-left">$8-$15</td>
<td class="org-left">for storing temp. values</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$s0-$s7</td>
<td class="org-left">$16-$23</td>
<td class="org-left">storing across function calls</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$t8-$t9</td>
<td class="org-left">$24-$25</td>
<td class="org-left">for storing more temp. values</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$k0-$k1</td>
<td class="org-left">$26-$27</td>
<td class="org-left">for kernel os use</td>
<td class="org-left">true</td>
</tr>

<tr>
<td class="org-left">$gp</td>
<td class="org-left">$28</td>
<td class="org-left">global (data) pointer register</td>
<td class="org-left">true</td>
</tr>

<tr>
<td class="org-left">$sp</td>
<td class="org-left">$29</td>
<td class="org-left">stack pointer (points to the top)</td>
<td class="org-left">true</td>
</tr>

<tr>
<td class="org-left">$fp</td>
<td class="org-left">$30</td>
<td class="org-left">frame pointer (points to stack frame)</td>
<td class="org-left">true</td>
</tr>

<tr>
<td class="org-left">$ra</td>
<td class="org-left">$31</td>
<td class="org-left">return address (return from fn call)</td>
<td class="org-left">true</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org3aae92a" class="outline-3">
<h3 id="org3aae92a">instructions</h3>
<div class="outline-text-3" id="text-org3aae92a">
<p>
<a href="https://www.dsi.unive.it/~gasparetto/materials/MIPS_Instruction_Set.pdf">SIMPLER REF SHEET</a>
<a href="https://uweb.engr.arizona.edu/~ece369/Resources/spim/MIPSReference.pdf">MIPS REFERENCE SHEET</a>
</p>
</div>
</div>

<div id="outline-container-org6703c68" class="outline-3">
<h3 id="org6703c68">Labs</h3>
<div class="outline-text-3" id="text-org6703c68">
<p>
If you find any errors please submit a pull request
</p>
</div>
<div id="outline-container-org91d36de" class="outline-4">
<h4 id="org91d36de">LAB 3</h4>
<div class="outline-text-4" id="text-org91d36de">
</div>
<ul class="org-ul">
<li><a id="orgbc0a2d8"></a>Task1<br />
<div class="outline-text-5" id="text-orgbc0a2d8">
<div class="org-src-container">
<pre class="src src-mips"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">task1</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">get integer input </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">multiply with 53.125 </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">print result</span>

<span style="color: #51afef; font-weight: bold;">.globl</span> main

<span style="color: #51afef; font-weight: bold;">.data</span>
<span style="color: #c678dd;">msg1:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Enter x: "</span>
<span style="color: #c678dd;">msg2:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"y = "</span>

<span style="color: #51afef; font-weight: bold;">.text</span>
<span style="color: #c678dd;">main:</span> 
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string input prompt</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg1
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #51afef;">syscall</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">read integer to $t0</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">5</span>
    <span style="color: #51afef;">syscall</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">.125 = x/8 = x &gt;&gt; 3</span>
    <span style="color: #51afef;">sra</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">3</span> 
    

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">53 = 32 + 16 + 4 + 1  </span>
    <span style="color: #51afef;">sll</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">5</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">32x </span>
    <span style="color: #51afef;">sll</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">16x </span>
    <span style="color: #51afef;">sll</span> <span style="color: #ECBE7B;">$t4</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">2</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">4x</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">add results to $t0</span>
    <span style="color: #51afef;">add</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">adds the 1x + .125x</span>
    <span style="color: #51afef;">add</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">+= 32x</span>
    <span style="color: #51afef;">add</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t3</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">+= 16x</span>
    <span style="color: #51afef;">add</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t4</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">+= 4x</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string output prompt</span>
    <span style="color: #dcaeea;">li</span>  <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg2
    <span style="color: #51afef;">syscall</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print result (result is already in $a0)</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>
    <span style="color: #51afef;">syscall</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">exit</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span>
    <span style="color: #51afef;">syscall</span>
</pre>
</div>
</div>
</li>

<li><a id="org666c4df"></a>Task2<br />
<div class="outline-text-5" id="text-org666c4df">
<div class="org-src-container">
<pre class="src src-mips"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">task2 </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">get an integer input </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">set bit 11 and 17 to 1 </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">print the result integer</span>

<span style="color: #51afef; font-weight: bold;">.globl</span> main

<span style="color: #51afef; font-weight: bold;">.data</span>
<span style="color: #c678dd;">msg1:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Enter a: "</span>
<span style="color: #c678dd;">msg2:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Result = "</span>

<span style="color: #51afef; font-weight: bold;">.text</span>
<span style="color: #c678dd;">main:</span> 
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string input prompt</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg1
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #51afef;">syscall</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">read integer to $t0</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">5</span>
    <span style="color: #51afef;">syscall</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">set bit 11 and 17 to 1</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">by ORing with a zeroed number except the</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">bit locations</span>
    <span style="color: #51afef;">ori</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">133120</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string output prompt</span>
    <span style="color: #dcaeea;">li</span>  <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg2
    <span style="color: #51afef;">syscall</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print result (result is already in $a0)</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>
    <span style="color: #51afef;">syscall</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">exit</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span>
    <span style="color: #51afef;">syscall</span>
</pre>
</div>
</div>
</li>
</ul>
</div>
<div id="outline-container-orgf44e877" class="outline-4">
<h4 id="orgf44e877">LAB 4</h4>
<div class="outline-text-4" id="text-orgf44e877">
</div>
<ul class="org-ul">
<li><a id="org07a371d"></a>Task1<br />
<div class="outline-text-5" id="text-org07a371d">
<div class="org-src-container">
<pre class="src src-mips"><span style="color: #51afef; font-weight: bold;">.globl</span> main

<span style="color: #51afef; font-weight: bold;">.data</span> 
<span style="color: #c678dd;">msg:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Enter a character: "</span>
<span style="color: #c678dd;">newline:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"\n"</span>
<span style="color: #c678dd;">lower:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Lowercase"</span>
<span style="color: #c678dd;">upper:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Uppercase"</span>
<span style="color: #c678dd;">digit:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Digit"</span> 
<span style="color: #c678dd;">special:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Special Character"</span>


<span style="color: #51afef; font-weight: bold;">.text</span> 
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">psuedo code </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">if ('a' &lt;= c &amp;&amp; 'z' &gt;= c) return lower;</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">if ('A' &lt;= c &amp;&amp; 'Z' &gt;= c) return upper;</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">if ('0'&lt;= c &amp;&amp; '9' &gt;= c) return digit; </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">return special;</span>

<span style="color: #c678dd;">main:</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">12</span>  
    <span style="color: #51afef;">syscall</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">store </span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print newline </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> newline
    <span style="color: #51afef;">syscall</span>

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">c is t0   </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">if ('a' &lt;= c &amp;&amp; 'z' &gt;= c) return lower;</span>
    <span style="color: #dcaeea;">bge</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> 'a'<span style="color: #c678dd;">,</span> lower2
    <span style="color: #51afef;">j</span> upper1
<span style="color: #c678dd;">lower2:</span> 
    <span style="color: #dcaeea;">ble</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> 'z'<span style="color: #c678dd;">,</span> print_lower 
    
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">if ('A' &lt;= c &amp;&amp; 'Z' &gt;= c) return upper;</span>
<span style="color: #c678dd;">upper1:</span> 
    <span style="color: #dcaeea;">bge</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> 'A'<span style="color: #c678dd;">,</span> upper2
    <span style="color: #51afef;">j</span> digit1
<span style="color: #c678dd;">upper2:</span> 
    <span style="color: #dcaeea;">ble</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> 'Z'<span style="color: #c678dd;">,</span> print_upper 
    
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">if ('0'&lt;= c &amp;&amp; '9' &gt;= c) return digit; </span>
<span style="color: #c678dd;">digit1:</span> 
    <span style="color: #dcaeea;">bge</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> '<span style="color: #da8548; font-weight: bold;">0</span>'<span style="color: #c678dd;">,</span> digit2
    <span style="color: #51afef;">j</span> print_special
<span style="color: #c678dd;">digit2:</span> 
    <span style="color: #dcaeea;">ble</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> '<span style="color: #da8548; font-weight: bold;">9</span>'<span style="color: #c678dd;">,</span> print_digit
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">else all are special;</span>
    <span style="color: #51afef;">j</span> print_special 
    
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">load the specific string for output prompt        </span>
<span style="color: #c678dd;">print_lower:</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> lower 
    <span style="color: #51afef;">j</span> done_load
    
<span style="color: #c678dd;">print_upper:</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> upper   
    <span style="color: #51afef;">j</span> done_load
    
<span style="color: #c678dd;">print_digit:</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> digit 
    <span style="color: #51afef;">j</span> done_load

<span style="color: #c678dd;">print_special:</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> special 
    <span style="color: #51afef;">j</span> done_load 
    
<span style="color: #c678dd;">done_load:</span> 
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print preloaded string address</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">exit</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span> 
    <span style="color: #51afef;">syscall</span> 
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org4c1e1c5" class="outline-4">
<h4 id="org4c1e1c5">LAB 5</h4>
<div class="outline-text-4" id="text-org4c1e1c5">
</div>
<ul class="org-ul">
<li><a id="orgf39f506"></a>Task1<br />
<div class="outline-text-5" id="text-orgf39f506">
<div class="org-src-container">
<pre class="src src-mips"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">TASK1</span>

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Write a MIPS assembly program that</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">reads the size (n) of the message from</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">the user. Then, the program allocates</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">(n+1) bytes in the heap. After that, read</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">a string of n characters from the user</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">he/she wishes to encrypt. Next, read</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">an encrypting key (e) from the user </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Encrypt the original string with the</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">encryption key using the following code.</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Finally, print out the encrypted string.</span>
<span style="color: #5B6268;"># </span>
<span style="color: #5B6268;">#</span>
<span style="color: #5B6268;">#</span>

<span style="color: #51afef; font-weight: bold;">.globl</span> main

<span style="color: #51afef; font-weight: bold;">.data</span> 
<span style="color: #c678dd;">msg1:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Enter n: "</span>
<span style="color: #c678dd;">msg2:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Enter string: "</span>
<span style="color: #c678dd;">msg3:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Enter e: "</span>
<span style="color: #c678dd;">msg4:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Encrypted string = "</span>


<span style="color: #51afef; font-weight: bold;">.text</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t0 will hold the n </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t1 will hold the e </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t2 is the temp `ch` variable</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t3 is the address of the string</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t4 is the index in loop</span>



<span style="color: #c678dd;">main:</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string input prompt</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg1
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t0 &lt;- ask for integer input </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">5</span>
    <span style="color: #51afef;">syscall</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string input prompt for string</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg2
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">malloc((n | $t0)+1)</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">9</span>
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">n++</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">load memory size</span>
    <span style="color: #51afef;">syscall</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">read string to memory</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">8</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t3</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span> 
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print newline</span>
    <span style="color: #5B6268;">#</span><span style="color: #5B6268;">li $v0, 11</span>
    <span style="color: #5B6268;">#</span><span style="color: #5B6268;">li $a0, '\n'</span>
    <span style="color: #5B6268;">#</span><span style="color: #5B6268;">syscall  </span>
    
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string input prompt </span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">for encrypt key</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg3
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">input encryption key</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">5</span> 
    <span style="color: #51afef;">syscall</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span>
    
    
    
    
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t0 will hold the n </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t1 will hold the e </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t2 is the temp `ch` variable</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t3 is the address of the string</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t4 is the index in loop</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t5 pointer to indexed char</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">PROGRAM BODY </span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">foreach (i; 0..&lt;n) {</span>
    <span style="color: #5B6268;">#   </span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">}</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t5</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t3</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">t5 = &amp;str[0]</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t4</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">i=0 </span>
<span style="color: #c678dd;">loop_body:</span>
    <span style="color: #51afef;">lbu</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">0</span>(<span style="color: #ECBE7B;">$t5</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">load char</span>
    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> 'A'<span style="color: #c678dd;">,</span> endif 
    <span style="color: #dcaeea;">ble</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> 'Z'<span style="color: #c678dd;">,</span> elseif_upper
    
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">islower   </span>
    <span style="color: #dcaeea;">bgt</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> 'z'<span style="color: #c678dd;">,</span> endif 
    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> 'a'<span style="color: #c678dd;">,</span> endif 
    <span style="color: #51afef;">addu</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">ch += e</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> 0x7A  
    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> endif <span style="color: #5B6268;"># </span><span style="color: #5B6268;">if ch &lt; 0x7A {goto endif}</span>
    subiu <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">26</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">ch -= 26</span>
    <span style="color: #51afef;">j</span> endif
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">isupper</span>
<span style="color: #c678dd;">elseif_upper:</span>
    <span style="color: #51afef;">addu</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">ch += e</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> 0x5A
    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> endif <span style="color: #5B6268;"># </span><span style="color: #5B6268;">if ch &lt; 0x5A {goto endif}</span>
    subiu <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">26</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">ch -= 26</span>
    
<span style="color: #c678dd;">endif:</span>  
    <span style="color: #51afef;">sb</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">0</span>(<span style="color: #ECBE7B;">$t5</span>)
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$t5</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t5</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">ptr++</span>
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$t4</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t4</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">i++</span>
    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$t4</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> loop_body <span style="color: #5B6268;"># </span><span style="color: #5B6268;">check i&lt;n</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print final result prompt </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg4 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print final result string</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t3</span>
    <span style="color: #51afef;">syscall</span>
    
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">exit</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span>
    <span style="color: #51afef;">syscall</span> 
</pre>
</div>
</div>
</li>

<li><a id="org27eea87"></a>Task2<br />
<div class="outline-text-5" id="text-org27eea87">
<div class="org-src-container">
<pre class="src src-mips"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">Task2 </span>

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Write a MIPS assembly program that asks the</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">user for file name (max 50 chars). Open the</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">file for reading. Next, read the file contents</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">as characters (max 100 chars). After that,</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">loop over each character, if the character is</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">a digit (i.e. &#8216;0&#8217; to &#8216;9&#8217;), convert it to integer and</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">store it in another array called &#8220;array int&#8221;.</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Assume the maximum number of integers</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">in the file is 20. Finally, print &#8220;array int&#8221; in</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">reverse order.</span>

<span style="color: #51afef; font-weight: bold;">.globl</span> main

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">define constants</span>
.eqv FILE_READ <span style="color: #da8548; font-weight: bold;">0</span>


<span style="color: #51afef; font-weight: bold;">.data</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">static data segment</span>
<span style="color: #c678dd;">msg1:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Enter filename: "</span>
<span style="color: #c678dd;">msg2:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Integer array reversed = "</span>
<span style="color: #c678dd;">msg3:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"File open error\nProbably file doesnt exist\n"</span>
<span style="color: #c678dd;">msg4:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"File read error\nI cant read this file\n"</span> 
<span style="color: #c678dd;">filename:</span> <span style="color: #51afef; font-weight: bold;">.space</span> <span style="color: #da8548; font-weight: bold;">50</span>
<span style="color: #c678dd;">filecontents:</span> <span style="color: #51afef; font-weight: bold;">.space</span> <span style="color: #da8548; font-weight: bold;">100</span>
<span style="color: #c678dd;">array_int:</span> <span style="color: #51afef; font-weight: bold;">.word</span> <span style="color: #da8548; font-weight: bold;">0</span><span style="color: #c678dd;">:</span><span style="color: #da8548; font-weight: bold;">20</span>

<span style="color: #51afef; font-weight: bold;">.text</span> 
<span style="color: #c678dd;">main:</span> 
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string input prompt</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg1
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">read string filename </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">8</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> filename
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">49</span>
    <span style="color: #51afef;">syscall</span> 
    
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">fix file name</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> filename
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$s0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">0</span>               <span style="color: #5B6268;"># </span><span style="color: #5B6268;">i=0</span>
<span style="color: #c678dd;">remove:</span>
    <span style="color: #51afef;">lb</span> <span style="color: #ECBE7B;">$a3</span><span style="color: #c678dd;">,</span> filename(<span style="color: #ECBE7B;">$s0</span>)      <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Load character at index</span>
    <span style="color: #51afef;">addi</span> <span style="color: #ECBE7B;">$s0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$s0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>        <span style="color: #5B6268;"># </span><span style="color: #5B6268;">i++</span>
    <span style="color: #dcaeea;">bnez</span> <span style="color: #ECBE7B;">$a3</span><span style="color: #c678dd;">,</span> remove   
    <span style="color: #51afef;">beq</span> <span style="color: #ECBE7B;">$a1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$s0</span><span style="color: #c678dd;">,</span> skip      
    subiu <span style="color: #ECBE7B;">$s0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$s0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">2</span>     <span style="color: #5B6268;"># </span><span style="color: #5B6268;">assuming '\n' is before the last char</span>
    <span style="color: #51afef;">sb</span> <span style="color: #ECBE7B;">$0</span><span style="color: #c678dd;">,</span> filename(<span style="color: #ECBE7B;">$s0</span>)        <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Add the terminating character in its place</span>
<span style="color: #c678dd;">skip:</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">open file </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">13</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a1</span><span style="color: #c678dd;">,</span> FILE_READ
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> filename
    <span style="color: #51afef;">syscall</span> 
    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$zero</span><span style="color: #c678dd;">,</span> file_open_err <span style="color: #5B6268;"># </span><span style="color: #5B6268;">assert file open</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">read file </span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span> 
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">14</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a1</span><span style="color: #c678dd;">,</span> filecontents
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">99</span>
    <span style="color: #51afef;">syscall</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">len in t0 </span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">assert file open</span>
    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$zero</span><span style="color: #c678dd;">,</span> file_read_err 
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">str[len]=0; // add null char</span>
    <span style="color: #51afef;">sb</span> <span style="color: #ECBE7B;">$0</span><span style="color: #c678dd;">,</span> filecontents+99 
    
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">foreach() {</span>
<span style="color: #5B6268;">#   </span><span style="color: #5B6268;">if ch == '\0'{ break; } </span>
<span style="color: #5B6268;">#   </span><span style="color: #5B6268;">if ch &gt;= '0' &amp;&amp; ch &lt;= '9' { </span>
<span style="color: #5B6268;">#       </span><span style="color: #5B6268;">add ch to array</span>
<span style="color: #5B6268;"># </span>
<span style="color: #5B6268;">#   </span><span style="color: #5B6268;">}</span>
<span style="color: #5B6268;">#   </span><span style="color: #5B6268;">continue</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">}</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t0: file length </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t1: index </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t2: string ptr </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">$t3: ch</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$zero</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">i=0</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$zero</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">arrlen</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> filecontents <span style="color: #5B6268;"># </span><span style="color: #5B6268;">file ptr</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$t4</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">20</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$t5</span><span style="color: #c678dd;">,</span> array_int
<span style="color: #c678dd;">loop:</span>
    <span style="color: #5B6268;">#</span><span style="color: #5B6268;">bge $t1, $t4, exitloop         </span>
    <span style="color: #51afef;">lbu</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> (<span style="color: #ECBE7B;">$t2</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">load char </span>
    <span style="color: #51afef;">beq</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$0</span><span style="color: #c678dd;">,</span> exitloop <span style="color: #5B6268;"># </span><span style="color: #5B6268;">exit if null char</span>
    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> '<span style="color: #da8548; font-weight: bold;">0</span>'<span style="color: #c678dd;">,</span> inc <span style="color: #5B6268;"># </span><span style="color: #5B6268;">check if less than 0</span>
    <span style="color: #dcaeea;">bgt</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> '<span style="color: #da8548; font-weight: bold;">9</span>'<span style="color: #c678dd;">,</span> inc <span style="color: #5B6268;"># </span><span style="color: #5B6268;">check if greater than 9</span>
    
    
<span style="color: #c678dd;">save:</span> <span style="color: #5B6268;">#</span><span style="color: #5B6268;">save word </span>
    subiu <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> '<span style="color: #da8548; font-weight: bold;">0</span>' <span style="color: #5B6268;"># </span><span style="color: #5B6268;">to get the original value</span>
    <span style="color: #51afef;">sw</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> (<span style="color: #ECBE7B;">$t5</span>) 
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$t5</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t5</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>

<span style="color: #c678dd;">inc:</span> <span style="color: #5B6268;">#</span><span style="color: #5B6268;">i++ and ptrs++</span>
    
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">i++</span>
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">file ptr++</span>
    <span style="color: #51afef;">j</span> loop

<span style="color: #c678dd;">exitloop:</span>   

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string result prompt</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg2 
    <span style="color: #51afef;">syscall</span>

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">for (i = len-1; i &gt;=0; i--) { }   </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">print int array reversed</span>
    subiu <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">if len = 0 no res</span>
    <span style="color: #51afef;">beq</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$zero</span><span style="color: #c678dd;">,</span> endrev
    
<span style="color: #c678dd;">rev:</span> 
    <span style="color: #51afef;">sll</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">2</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">i*4</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> array_int
    <span style="color: #51afef;">addu</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span> 
    
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> (<span style="color: #ECBE7B;">$t2</span>)
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">0</span><span style="color: #c678dd;">,</span> endrev
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print space</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">11</span> 
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> ' '
    <span style="color: #51afef;">syscall</span> 
    
    subiu <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>
    <span style="color: #51afef;">bne</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> <span style="color: #a9a1e1;">-1</span><span style="color: #c678dd;">,</span> rev
<span style="color: #c678dd;">endrev:</span> 
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">exit</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span> 
    <span style="color: #51afef;">syscall</span> 
    
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">error msgs segment    </span>
<span style="color: #c678dd;">file_open_err:</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg3 
    <span style="color: #51afef;">j</span> file_err
<span style="color: #c678dd;">file_read_err:</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg4 
<span style="color: #c678dd;">file_err:</span> 
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print preloaded string</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">exit</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span> 
    <span style="color: #51afef;">syscall</span>
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-orgc7f7a5f" class="outline-4">
<h4 id="orgc7f7a5f">LAB 6</h4>
<div class="outline-text-4" id="text-orgc7f7a5f">
</div>
<ul class="org-ul">
<li><a id="org2ecb784"></a>Task1<br />
<div class="outline-text-5" id="text-org2ecb784">
<div class="org-src-container">
<pre class="src src-mips"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">convert withdrawal money amount to bank notes</span>
<span style="color: #51afef; font-weight: bold;">.globl</span> main 

<span style="color: #51afef; font-weight: bold;">.data</span> 
<span style="color: #c678dd;">msg1:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Enter withdrawal amount: "</span>
<span style="color: #c678dd;">msg2:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"500 Bank note: "</span>
<span style="color: #c678dd;">msg3:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"100 Bank note: "</span>
<span style="color: #c678dd;">msg4:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"50 Bank note: "</span>
<span style="color: #c678dd;">msg5:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"10 Bank note: "</span>
<span style="color: #c678dd;">msg6:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"5 Bank note: "</span>
<span style="color: #c678dd;">msg7:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"1 Bank note: "</span>

<span style="color: #51afef; font-weight: bold;">.text</span> 
<span style="color: #c678dd;">main:</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string input prompt</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg1 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">read integer </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">5</span> 
    <span style="color: #51afef;">syscall</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">get 500s</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">500</span>
    <span style="color: #51afef;">div</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span> 
    <span style="color: #51afef;">mfhi</span> <span style="color: #ECBE7B;">$t0</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">get 100s</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">100</span> 
    <span style="color: #51afef;">div</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span> 
    <span style="color: #51afef;">mfhi</span> <span style="color: #ECBE7B;">$t0</span>
        
        
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">get 50s</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">50</span> 
    <span style="color: #51afef;">div</span> <span style="color: #ECBE7B;">$t4</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span> 
    <span style="color: #51afef;">mfhi</span> <span style="color: #ECBE7B;">$t0</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">get 10s</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span> 
    <span style="color: #51afef;">div</span> <span style="color: #ECBE7B;">$t5</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span> 
    <span style="color: #51afef;">mfhi</span> <span style="color: #ECBE7B;">$t0</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">get 5s</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">5</span> 
    <span style="color: #51afef;">div</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span> 
    <span style="color: #51afef;">mfhi</span> <span style="color: #ECBE7B;">$t0</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">get 1s</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> 
    <span style="color: #51afef;">div</span> <span style="color: #ECBE7B;">$t7</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span> 
    <span style="color: #51afef;">mfhi</span> <span style="color: #ECBE7B;">$t0</span>
    
<span style="color: #c678dd;">x_500s:</span>
    <span style="color: #51afef;">blez</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> x_100s
    
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg2
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span> 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">11</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> '\n'
    <span style="color: #51afef;">syscall</span> 
     
<span style="color: #c678dd;">x_100s:</span>
    <span style="color: #51afef;">blez</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> x_50s
    
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg3
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t3</span> 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">11</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> '\n'
    <span style="color: #51afef;">syscall</span>
<span style="color: #c678dd;">x_50s:</span> 
    <span style="color: #51afef;">blez</span> <span style="color: #ECBE7B;">$t4</span><span style="color: #c678dd;">,</span> x_10s
    
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg4
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t4</span> 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">11</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> '\n'
    <span style="color: #51afef;">syscall</span>
<span style="color: #c678dd;">x_10s:</span>
    <span style="color: #51afef;">blez</span> <span style="color: #ECBE7B;">$t5</span><span style="color: #c678dd;">,</span> x_5s 
    
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg5
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t5</span> 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">11</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> '\n'
    <span style="color: #51afef;">syscall</span>
<span style="color: #c678dd;">x_5s:</span>
    <span style="color: #51afef;">blez</span> <span style="color: #ECBE7B;">$t6</span><span style="color: #c678dd;">,</span> x_1s
    
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg6
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t6</span>
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">11</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> '\n'
    <span style="color: #51afef;">syscall</span>
    
<span style="color: #c678dd;">x_1s:</span>
    <span style="color: #51afef;">blez</span> <span style="color: #ECBE7B;">$t7</span><span style="color: #c678dd;">,</span> done 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg7
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t7</span> 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">11</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> '\n'
    <span style="color: #51afef;">syscall</span>
    
<span style="color: #c678dd;">done:</span> 
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span> 
    <span style="color: #51afef;">syscall</span>
</pre>
</div>
</div>
</li>

<li><a id="orgeeab658"></a>Task2<br />
<div class="outline-text-5" id="text-orgeeab658">
<div class="org-src-container">
<pre class="src src-mips"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">Get factorial of input number</span>
<span style="color: #51afef; font-weight: bold;">.globl</span> main 

<span style="color: #51afef; font-weight: bold;">.data</span> 
<span style="color: #c678dd;">msg:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Enter n: "</span>
<span style="color: #c678dd;">msg2:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"n! = "</span>
<span style="color: #51afef; font-weight: bold;">.text</span> 

<span style="color: #c678dd;">main:</span> 
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string input prompt </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">read int</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">5</span>
    <span style="color: #51afef;">syscall</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span> 
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">result </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">i</span>
<span style="color: #c678dd;">loop:</span> 
    <span style="color: #dcaeea;">bgt</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> endLoop 
<span style="color: #c678dd;">body:</span> 
    <span style="color: #51afef;">mul</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span> 

<span style="color: #c678dd;">inc:</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">i++</span>
    <span style="color: #51afef;">addi</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> 
    <span style="color: #51afef;">j</span> loop
<span style="color: #c678dd;">endLoop:</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print output prompt </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg2 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print int result</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span> 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print newline</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">11</span> 
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> '\n' 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">exit</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span> 
    <span style="color: #51afef;">syscall</span>
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org6081bc3" class="outline-4">
<h4 id="org6081bc3">LAB 7</h4>
<div class="outline-text-4" id="text-org6081bc3">
</div>
<ul class="org-ul">
<li><a id="org11ffcb4"></a>Task1<br />
<div class="outline-text-5" id="text-org11ffcb4">
<div class="org-src-container">
<pre class="src src-mips"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">TASK 1 </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">using the stack </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">run the f();</span>
<span style="color: #5B6268;">#</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">void f() { </span>
<span style="color: #5B6268;">#   </span><span style="color: #5B6268;">int array[10]; </span>
<span style="color: #5B6268;">#   </span><span style="color: #5B6268;">read(array, 10); </span>
<span style="color: #5B6268;">#   </span><span style="color: #5B6268;">reverse(array, 10); </span>
<span style="color: #5B6268;">#   </span><span style="color: #5B6268;">print(array, 10); </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">}</span>

<span style="color: #51afef; font-weight: bold;">.globl</span> main 

<span style="color: #51afef; font-weight: bold;">.data</span> 
<span style="color: #c678dd;">msg1:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Enter integer "</span>
<span style="color: #c678dd;">colon:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">": "</span>
<span style="color: #c678dd;">msg2:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Integer reversed = "</span> 

<span style="color: #51afef; font-weight: bold;">.text</span>
<span style="color: #c678dd;">main:</span> 
    <span style="color: #51afef;">jal</span> f
    
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">exit</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span> 
    <span style="color: #51afef;">syscall</span> 

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">read(int[], int)</span>
<span style="color: #c678dd;">read:</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$0</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$a0</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$a1</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">for (i: 0..&lt;n) { }</span>
<span style="color: #c678dd;">loop_read:</span> 
    <span style="color: #dcaeea;">bge</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> endLoop_Read
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string read prompt</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg1 
    <span style="color: #51afef;">syscall</span> 
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print i+1</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> 
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print colon</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> colon 
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">read integer</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">5</span>
    <span style="color: #51afef;">syscall</span> 
    <span style="color: #51afef;">sw</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> (<span style="color: #ECBE7B;">$t1</span>)
<span style="color: #c678dd;">inc_read:</span> 
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">i++, stack_ptr++ (using sizeof(int))</span>
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> 
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">32 bit</span>
    <span style="color: #dcaeea;">b</span> loop_read
    
<span style="color: #c678dd;">endLoop_Read:</span> 
    <span style="color: #51afef;">jr</span> <span style="color: #ECBE7B;">$ra</span> 
    
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">reverse(int[], int) </span>
<span style="color: #c678dd;">reverse:</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$0</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$a0</span> 
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">get address of the last element</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$a1</span> 
    <span style="color: #51afef;">subi</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>
    <span style="color: #51afef;">sll</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">2</span>
    <span style="color: #51afef;">addu</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span>
    
<span style="color: #c678dd;">loop_rev:</span> 
    <span style="color: #dcaeea;">bge</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> endLoop_rev
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">ALGORITHM</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">int t = arr[i]</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">arr[i] = arr[j]</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">arr[j] = t</span>
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> (<span style="color: #ECBE7B;">$t1</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">t</span>
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$t4</span><span style="color: #c678dd;">,</span> (<span style="color: #ECBE7B;">$t2</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">arr[j]</span>
    <span style="color: #51afef;">sw</span> <span style="color: #ECBE7B;">$t4</span><span style="color: #c678dd;">,</span> (<span style="color: #ECBE7B;">$t1</span>)
    <span style="color: #51afef;">sw</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> (<span style="color: #ECBE7B;">$t2</span>)

<span style="color: #c678dd;">inc_rev:</span> 
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>  <span style="color: #5B6268;"># </span><span style="color: #5B6268;">ptr.begin()++</span>
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #a9a1e1;">-4</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">ptr.end()--</span>
    <span style="color: #51afef;">j</span> loop_rev

<span style="color: #c678dd;">endLoop_rev:</span> 
    <span style="color: #51afef;">jr</span> <span style="color: #ECBE7B;">$ra</span> 

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">print(int[], int)</span>
<span style="color: #c678dd;">print:</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$a0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">store arr addr</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$a1</span> 
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string output prompt</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg2
    <span style="color: #51afef;">syscall</span> 
    

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">address of last el + 1    </span>
    <span style="color: #51afef;">subi</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>
    <span style="color: #51afef;">sll</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">2</span>
    <span style="color: #51afef;">addu</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span>
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>
<span style="color: #c678dd;">loop_pr:</span> 
    <span style="color: #dcaeea;">bge</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> end_pr
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print int </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> 
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> (<span style="color: #ECBE7B;">$t0</span>)
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print space</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">11</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> ' '
    <span style="color: #51afef;">syscall</span>
    
<span style="color: #c678dd;">inc_pr:</span>
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #51afef;">j</span> loop_pr
<span style="color: #c678dd;">end_pr:</span>
    <span style="color: #51afef;">jr</span> <span style="color: #ECBE7B;">$ra</span> 

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">f() </span>
<span style="color: #c678dd;">f:</span> 
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$sp</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$sp</span><span style="color: #c678dd;">,</span> <span style="color: #a9a1e1;">-44</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">allocate stack frame = 44 bytes </span>
    <span style="color: #51afef;">sw</span> <span style="color: #ECBE7B;">$ra</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">40</span>(<span style="color: #ECBE7B;">$sp</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">save $ra on the stack </span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$sp</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">$a0 = address of array on the stack </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">$a1 = 10 </span>
    <span style="color: #51afef;">jal</span> read <span style="color: #5B6268;"># </span><span style="color: #5B6268;">call function read </span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$sp</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">$a0 = address of array on the stack </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">$a1 = 10 </span>
    <span style="color: #51afef;">jal</span> reverse <span style="color: #5B6268;"># </span><span style="color: #5B6268;">call function reverse </span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$sp</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">$a0 = address of array on the stack </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">$a1 = 10 </span>
    <span style="color: #51afef;">jal</span> print <span style="color: #5B6268;"># </span><span style="color: #5B6268;">call function print </span>
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$ra</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">40</span>(<span style="color: #ECBE7B;">$sp</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">load $ra from the stack </span>
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$sp</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$sp</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">44</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Free stack frame = 44 bytes </span>
    <span style="color: #51afef;">jr</span> <span style="color: #ECBE7B;">$ra</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">return to caller</span>
</pre>
</div>
</div>
</li>

<li><a id="orgd102696"></a>Task2<br />
<div class="outline-text-5" id="text-orgd102696">
<div class="org-src-container">
<pre class="src src-mips"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">Task 2</span>

<span style="color: #51afef; font-weight: bold;">.globl</span> main
<span style="color: #51afef; font-weight: bold;">.data</span>
<span style="color: #c678dd;">msg1:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Enter n: "</span>
<span style="color: #c678dd;">msg2:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"fib(n) = "</span> 
<span style="color: #51afef; font-weight: bold;">.text</span>
<span style="color: #c678dd;">main:</span> 
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print prompt</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg1 
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">5</span>
    <span style="color: #51afef;">syscall</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span>
    
    <span style="color: #51afef;">jal</span> fib 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span> 
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg2 
    <span style="color: #51afef;">syscall</span>
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> 
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span> 
    <span style="color: #51afef;">syscall</span>  
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">exit</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span>
    <span style="color: #51afef;">syscall</span>
    
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">int fib(int n) {</span>
<span style="color: #5B6268;">#   </span><span style="color: #5B6268;">if (n &lt;= 1)</span>
<span style="color: #5B6268;">#       </span><span style="color: #5B6268;">return n;</span>
<span style="color: #5B6268;">#   </span><span style="color: #5B6268;">return fib(n-1)+fib(n-2);</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">}</span>

<span style="color: #c678dd;">fib:</span> 
     <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$a0</span>
     <span style="color: #5B6268;"># </span><span style="color: #5B6268;">if n &lt;= 1 { return n }</span>
     <span style="color: #dcaeea;">bgt</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span><span style="color: #c678dd;">,</span> else
     <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$a0</span>
     <span style="color: #51afef;">jr</span> <span style="color: #ECBE7B;">$ra</span>
     <span style="color: #5B6268;"># </span><span style="color: #5B6268;">else </span>
     <span style="color: #5B6268;"># </span><span style="color: #5B6268;">t1 = fib (n - 1) </span>
     <span style="color: #5B6268;"># </span><span style="color: #5B6268;">t2 = fib (n - 2) </span>
     <span style="color: #5B6268;"># </span><span style="color: #5B6268;">t3 = t1 + t2 </span>
     <span style="color: #5B6268;"># </span><span style="color: #5B6268;">v0 = t3</span>
<span style="color: #c678dd;">else:</span> 
    <span style="color: #51afef;">addi</span> <span style="color: #ECBE7B;">$sp</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$sp</span><span style="color: #c678dd;">,</span> <span style="color: #a9a1e1;">-12</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">allocate stack</span>
    <span style="color: #51afef;">sw</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">0</span>(<span style="color: #ECBE7B;">$sp</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">store temp n</span>
    <span style="color: #51afef;">sw</span> <span style="color: #ECBE7B;">$ra</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>(<span style="color: #ECBE7B;">$sp</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">store return address</span>
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">0</span>(<span style="color: #ECBE7B;">$sp</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">restore $a0 = n </span>
    <span style="color: #51afef;">addi</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #a9a1e1;">-1</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">n - 1</span>

    <span style="color: #51afef;">jal</span> fib
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span>
    <span style="color: #51afef;">sw</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">8</span>(<span style="color: #ECBE7B;">$sp</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">store temp fib(n-1)</span>
    
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">0</span>(<span style="color: #ECBE7B;">$sp</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">restore $a0 = n</span>
    <span style="color: #51afef;">subi</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">2</span>
    <span style="color: #51afef;">jal</span> fib
    
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">8</span>(<span style="color: #ECBE7B;">$sp</span>)
    <span style="color: #51afef;">addu</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span>
    
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$ra</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>(<span style="color: #ECBE7B;">$sp</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">restore return address</span>
    <span style="color: #51afef;">addi</span> <span style="color: #ECBE7B;">$sp</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$sp</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">12</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">deallocate stack  </span>
    <span style="color: #51afef;">jr</span> <span style="color: #ECBE7B;">$ra</span>
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-org4dd7ba3" class="outline-4">
<h4 id="org4dd7ba3">LAB 8</h4>
<div class="outline-text-4" id="text-org4dd7ba3">
</div>
<ul class="org-ul">
<li><a id="orgbc0c1d6"></a>Task1<br />
<div class="outline-text-5" id="text-orgbc0c1d6">
<div class="org-src-container">
<pre class="src src-mips"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">Task 1 </span>
<span style="color: #51afef; font-weight: bold;">.globl</span> main

<span style="color: #51afef; font-weight: bold;">.data</span> 
<span style="color: #c678dd;">msg1:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Enter Dividend (x): "</span>
<span style="color: #c678dd;">msg2:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Enter Divisor (y): "</span>
<span style="color: #c678dd;">msg3:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Divide By Zero Exception.\nPlease enter a different value for y.\n"</span>
<span style="color: #c678dd;">msg5:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Enter Divisor (y): "</span>
<span style="color: #c678dd;">msg6:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"The result of x/y is "</span>

<span style="color: #51afef; font-weight: bold;">.text</span>
<span style="color: #c678dd;">main:</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print prompt1 </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg1 
    <span style="color: #51afef;">syscall</span> 

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">read int1</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">5</span>
    <span style="color: #51afef;">syscall</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">dividend</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print prompt1 </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg2 
    <span style="color: #51afef;">syscall</span> 

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">read int1</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">5</span>
    <span style="color: #51afef;">syscall</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">dividend</span>
    
    <span style="color: #51afef;">div</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span>
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print result prompt</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> msg6
    <span style="color: #51afef;">syscall</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">print int result</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span> 
    <span style="color: #51afef;">syscall</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">exit</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span>  
    <span style="color: #51afef;">syscall</span>

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">kernel mode (where the death begins)</span>
<span style="color: #51afef; font-weight: bold;">.ktext</span> 0x80000180
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$k1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$at</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$k0</span><span style="color: #c678dd;">,</span> _regs 
    <span style="color: #51afef;">sw</span> <span style="color: #ECBE7B;">$k1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">0</span>(<span style="color: #ECBE7B;">$k0</span>)
    <span style="color: #51afef;">sw</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>(<span style="color: #ECBE7B;">$k0</span>)
    <span style="color: #51afef;">sw</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">8</span>(<span style="color: #ECBE7B;">$k0</span>)
<span style="color: #c678dd;">redo:</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> _msg
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #51afef;">syscall</span> 
    
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">5</span> 
    <span style="color: #51afef;">syscall</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span>
    <span style="color: #dcaeea;">beqz</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> redo

    

    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$k1</span><span style="color: #c678dd;">,</span> _regs <span style="color: #5B6268;"># </span><span style="color: #5B6268;">$k1 = address of _regs</span>
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$at</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">0</span>(<span style="color: #ECBE7B;">$k1</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">restore $at</span>
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>(<span style="color: #ECBE7B;">$k1</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">restore $v0</span>
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">8</span>(<span style="color: #ECBE7B;">$k1</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">restore $a0    </span>

    <span style="color: #51afef;">mtc0</span> <span style="color: #ECBE7B;">$zero</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$8</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">clear vaddr</span>
    <span style="color: #51afef;">mfc0</span> <span style="color: #ECBE7B;">$k0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$14</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">$k0 = EPC</span>
    <span style="color: #51afef;">addiu</span> <span style="color: #ECBE7B;">$k0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$k0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Increment $k0 by 4</span>
    <span style="color: #51afef;">mtc0</span> <span style="color: #ECBE7B;">$k0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$14</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">EPC = point to next instruction</span>
    <span style="color: #51afef;">eret</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">exception return: PC = EPC   </span>

<span style="color: #51afef; font-weight: bold;">.kdata</span>
<span style="color: #c678dd;">_regs:</span> <span style="color: #51afef; font-weight: bold;">.word</span> <span style="color: #da8548; font-weight: bold;">0</span><span style="color: #c678dd;">:</span><span style="color: #da8548; font-weight: bold;">3</span>
<span style="color: #c678dd;">_msg:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"Divide By Zero Exception.\nPlease enter a different value for y.\n"</span>
</pre>
</div>
</div>
</li>

<li><a id="org2e0beaa"></a>Task2<br />
<div class="outline-text-5" id="text-org2e0beaa">
<div class="org-src-container">
<pre class="src src-mips"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">Task 2 </span>
<span style="color: #51afef; font-weight: bold;">.globl</span> main
.eqv KEY_REG_ADDR 0xffff0000
.eqv DISP_CNTRL_REG 0xffff0008
<span style="color: #51afef; font-weight: bold;">.text</span>
<span style="color: #c678dd;">main:</span>

    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> KEY_REG_ADDR <span style="color: #5B6268;"># </span><span style="color: #5B6268;">KEYBOARD REGISTER ADDRESS</span>
<span style="color: #c678dd;">wait_keyboard:</span>
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> (<span style="color: #ECBE7B;">$t0</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Read the keyboard control register</span>
    <span style="color: #51afef;">andi</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Extract ready bit</span>
    <span style="color: #dcaeea;">beqz</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> wait_keyboard <span style="color: #5B6268;"># </span><span style="color: #5B6268;">loop back while not ready</span>
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>(<span style="color: #ECBE7B;">$t0</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Get character from keyboard</span>

<span style="color: #c678dd;">check_lower:</span> 
    <span style="color: #dcaeea;">bge</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> 'a'<span style="color: #c678dd;">,</span> lower
    <span style="color: #dcaeea;">bge</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> 'A'<span style="color: #c678dd;">,</span> upper
    <span style="color: #51afef;">j</span> <span style="color: #51afef;">break</span>_check
<span style="color: #c678dd;">lower:</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">toupper</span>
    <span style="color: #dcaeea;">bgt</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> 'z'<span style="color: #c678dd;">,</span> <span style="color: #51afef;">break</span>_check
    <span style="color: #51afef;">subi</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">32</span>
    <span style="color: #51afef;">j</span> <span style="color: #51afef;">break</span>_check
<span style="color: #c678dd;">upper:</span>  
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">tolower</span>
    <span style="color: #dcaeea;">bgt</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> 'Z'<span style="color: #c678dd;">,</span> <span style="color: #51afef;">break</span>_check
    <span style="color: #51afef;">addi</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">32</span>
    <span style="color: #51afef;">j</span> <span style="color: #51afef;">break</span>_check
<span style="color: #c678dd;">break_check:</span>


    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> DISP_CNTRL_REG <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Address of display control register</span>
<span style="color: #c678dd;">wait_display:</span>
    <span style="color: #51afef;">lw</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> (<span style="color: #ECBE7B;">$t0</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Read the display control register</span>
    <span style="color: #51afef;">andi</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Extract ready bit</span>
    <span style="color: #dcaeea;">beqz</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> wait_display <span style="color: #5B6268;"># </span><span style="color: #5B6268;">loop back while not ready</span>
    <span style="color: #51afef;">sw</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>(<span style="color: #ECBE7B;">$t0</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">Send character to display</span>

    <span style="color: #51afef;">j</span> main
</pre>
</div>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-org18f2725" class="outline-3">
<h3 id="org18f2725">Homework</h3>
<div class="outline-text-3" id="text-org18f2725">
</div>
<div id="outline-container-org9875646" class="outline-4">
<h4 id="org9875646">HM1</h4>
<div class="outline-text-4" id="text-org9875646">
<div class="org-src-container">
<pre class="src src-mips"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">Homework1 </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">READ THE WORDS, LETTERS, </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">NUMBERS AND DIGITS IN FILE data.txt</span>

<span style="color: #51afef; font-weight: bold;">.globl</span> main 

.eqv FILE_READ <span style="color: #da8548; font-weight: bold;">0</span>

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string literal</span>
.macro print_string(%s) 
<span style="color: #51afef; font-weight: bold;">.data</span> 
<span style="color: #c678dd;">str_ptr:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> %s
<span style="color: #51afef; font-weight: bold;">.text</span> 
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> str_ptr
    <span style="color: #51afef;">syscall</span>
.end_macro

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">print word integer in register</span>
.macro print_int_reg(%r) 
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> %r
    <span style="color: #51afef;">syscall</span>
.end_macro

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string in data segment</span>
.macro print_s(%d) 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> %d
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #51afef;">syscall</span>
.end_macro 

.macro print_newline 
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">11</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> '\n'
    <span style="color: #51afef;">syscall</span>
.end_macro

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">increment register</span>
.macro incr(%r) 
    <span style="color: #51afef;">addiu</span> %r<span style="color: #c678dd;">,</span> %r<span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>
.end_macro
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">file_name: put a string literal</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">file_addr: put a register to store buffer address</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">len: put a register to store file length in </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">max_len: put an int literal for max length of the string</span>
.macro read_file(%file_name<span style="color: #c678dd;">,</span> %file_addr<span style="color: #c678dd;">,</span> %len<span style="color: #c678dd;">,</span> %max_len)
.eqv FILE_READ <span style="color: #da8548; font-weight: bold;">0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">define constant</span>
<span style="color: #51afef; font-weight: bold;">.data</span> 
<span style="color: #c678dd;">filename:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> %file_name    
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">make sure u dont have another symbol called `buffer`</span>
<span style="color: #c678dd;">buffer:</span> <span style="color: #51afef; font-weight: bold;">.byte</span> <span style="color: #da8548; font-weight: bold;">0</span><span style="color: #c678dd;">:</span>%max_len 
<span style="color: #c678dd;">file_open_err_str:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"[ERROR]: error opening "</span>
<span style="color: #c678dd;">file_read_err_str:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"[ERROR]: error reading "</span>
<span style="color: #51afef; font-weight: bold;">.text</span>
    <span style="color: #51afef;">j</span> macro_body <span style="color: #5B6268;"># </span><span style="color: #5B6268;">skip error printing</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">error handling area </span>
<span style="color: #c678dd;">file_open_err:</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> file_open_err_str
    <span style="color: #51afef;">j</span> print_err
<span style="color: #c678dd;">file_read_err:</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> file_read_err_str 
    <span style="color: #51afef;">j</span> print_err
<span style="color: #c678dd;">print_err:</span> 
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #51afef;">syscall</span> 

    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> filename
    <span style="color: #51afef;">syscall</span> 

    print_newline 

    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span> 
    <span style="color: #51afef;">syscall</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">macro code starts here</span>
<span style="color: #c678dd;">macro_body:</span> 
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">open file </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">13</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> filename
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a1</span><span style="color: #c678dd;">,</span> FILE_READ
    <span style="color: #51afef;">syscall</span> 

    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$zero</span><span style="color: #c678dd;">,</span> file_open_err <span style="color: #5B6268;"># </span><span style="color: #5B6268;">assert file open</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">read file </span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span> 
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">14</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a1</span><span style="color: #c678dd;">,</span> buffer
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a2</span><span style="color: #c678dd;">,</span> %max_len
    <span style="color: #51afef;">syscall</span> 
    <span style="color: #dcaeea;">move</span> %len<span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">len in %len</span>
    <span style="color: #dcaeea;">la</span> %file_addr<span style="color: #c678dd;">,</span> buffer <span style="color: #5B6268;"># </span><span style="color: #5B6268;">load string addr to buffer</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">assert file open</span>
    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$zero</span><span style="color: #c678dd;">,</span> file_read_err 
.end_macro

<span style="color: #51afef; font-weight: bold;">.data</span> 

<span style="color: #51afef; font-weight: bold;">.text</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">program starting point </span>
<span style="color: #c678dd;">main:</span> 
    read_file(<span style="color: #98be65;">"data.txt"</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10000</span>)
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">t0: buffer ptr</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">t1: file length (not needed)</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">dicarded and used for dereferenced char</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">t2: digits </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">t3: numbers </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">t4: letters </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">t5: words</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t2</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">init 0</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t3</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">init 0</span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t4</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">init 0 </span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$t5</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">init 0 </span>

<span style="color: #c678dd;">loop:</span> 
    <span style="color: #51afef;">lb</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> (<span style="color: #ECBE7B;">$t0</span>) 
    <span style="color: #51afef;">beq</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$0</span><span style="color: #c678dd;">,</span> endLoop

<span style="color: #c678dd;">checkDigit:</span>
    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> '<span style="color: #da8548; font-weight: bold;">0</span>'<span style="color: #c678dd;">,</span> inc
    <span style="color: #dcaeea;">bgt</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> '<span style="color: #da8548; font-weight: bold;">9</span>'<span style="color: #c678dd;">,</span> checkLetter

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">cond #1 </span>
<span style="color: #c678dd;">isDigit:</span> 
    incr(<span style="color: #ECBE7B;">$t3</span>)   
<span style="color: #c678dd;">isNum:</span> 
    incr(<span style="color: #ECBE7B;">$t2</span>)
    incr(<span style="color: #ECBE7B;">$t0</span>) 
    <span style="color: #51afef;">lb</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> (<span style="color: #ECBE7B;">$t0</span>)
    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> '<span style="color: #da8548; font-weight: bold;">0</span>'<span style="color: #c678dd;">,</span> inc
    <span style="color: #dcaeea;">bgt</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> '<span style="color: #da8548; font-weight: bold;">9</span>'<span style="color: #c678dd;">,</span> checkLetter
    <span style="color: #51afef;">j</span> isNum


<span style="color: #c678dd;">checkLetter:</span>    
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">cond #2 </span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">is cap letter?</span>
    <span style="color: #dcaeea;">sle</span> <span style="color: #ECBE7B;">$t7</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> 'Z'
    <span style="color: #dcaeea;">sge</span> <span style="color: #ECBE7B;">$t8</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> 'A'
    <span style="color: #51afef;">and</span> <span style="color: #ECBE7B;">$t7</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t7</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t8</span>
    <span style="color: #dcaeea;">bnez</span> <span style="color: #ECBE7B;">$t7</span><span style="color: #c678dd;">,</span> isLetter
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">is lower letter?</span>
    <span style="color: #dcaeea;">sle</span> <span style="color: #ECBE7B;">$t7</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> 'z'
    <span style="color: #dcaeea;">sge</span> <span style="color: #ECBE7B;">$t8</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> 'a'
    <span style="color: #51afef;">and</span> <span style="color: #ECBE7B;">$t7</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t7</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t8</span>
    <span style="color: #dcaeea;">bnez</span> <span style="color: #ECBE7B;">$t7</span><span style="color: #c678dd;">,</span> isLetter
    
    <span style="color: #51afef;">j</span> inc

<span style="color: #c678dd;">isLetter:</span>
    incr(<span style="color: #ECBE7B;">$t5</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">increment words count</span>

<span style="color: #c678dd;">isWord:</span>
    incr(<span style="color: #ECBE7B;">$t4</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">increment letter count</span>
    incr(<span style="color: #ECBE7B;">$t0</span>) <span style="color: #5B6268;"># </span><span style="color: #5B6268;">advance ptr</span>
    <span style="color: #51afef;">lb</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> (<span style="color: #ECBE7B;">$t0</span>)
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">is cap letter?</span>
    <span style="color: #dcaeea;">sle</span> <span style="color: #ECBE7B;">$t7</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> 'Z'
    <span style="color: #dcaeea;">sge</span> <span style="color: #ECBE7B;">$t8</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> 'A'
    <span style="color: #51afef;">and</span> <span style="color: #ECBE7B;">$t9</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t7</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t8</span>
    <span style="color: #dcaeea;">bnez</span> <span style="color: #ECBE7B;">$t9</span><span style="color: #c678dd;">,</span> isWord
    
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">is lower letter?</span>
    <span style="color: #dcaeea;">sle</span> <span style="color: #ECBE7B;">$t7</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> 'z'
    <span style="color: #dcaeea;">sge</span> <span style="color: #ECBE7B;">$t8</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t1</span><span style="color: #c678dd;">,</span> 'a'
    <span style="color: #51afef;">and</span> <span style="color: #ECBE7B;">$t9</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t7</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$t8</span>
    <span style="color: #dcaeea;">bnez</span> <span style="color: #ECBE7B;">$t9</span><span style="color: #c678dd;">,</span> isWord
    <span style="color: #51afef;">j</span> loop

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">ptr++ </span>
<span style="color: #c678dd;">inc:</span> 
    incr(<span style="color: #ECBE7B;">$t0</span>)
    <span style="color: #51afef;">j</span> loop  

<span style="color: #c678dd;">endLoop:</span> 

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">output results </span>
    print_string(<span style="color: #98be65;">"Letters = "</span>)
    print_int_reg(<span style="color: #ECBE7B;">$t4</span>)
    print_newline 
    print_string(<span style="color: #98be65;">"Digits = "</span>)
    print_int_reg(<span style="color: #ECBE7B;">$t2</span>)
    print_newline
    print_string(<span style="color: #98be65;">"Words = "</span>)
    print_int_reg(<span style="color: #ECBE7B;">$t5</span>)
    print_newline
    print_string(<span style="color: #98be65;">"Numbers = "</span>)
    print_int_reg(<span style="color: #ECBE7B;">$t3</span>)
    print_newline
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org3b05b48" class="outline-3">
<h3 id="org3b05b48">Useful Macros</h3>
<div class="outline-text-3" id="text-org3b05b48">
<p>
use these to develop code faster
</p>
<div class="org-src-container">
<pre class="src src-mips"><span style="color: #5B6268;"># </span><span style="color: #98be65; font-weight: bold;">NOTE:</span><span style="color: #5B6268;"> useful macros for general development  </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">exit program</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">no params required</span>
.macro exit() 
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span>
    <span style="color: #51afef;">syscall</span>
.end_macro

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">print strings</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">param(s): string address</span>
.macro print_str(%s)
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> %s
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #51afef;">syscall</span>
.end_macro

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">print string literals</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">param(s): string literal</span>
.macro print_strlit(%s)
<span style="color: #51afef; font-weight: bold;">.data</span>
<span style="color: #c678dd;">string_pointer:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> %s
<span style="color: #51afef; font-weight: bold;">.text</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> string_pointer
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span>
    <span style="color: #51afef;">syscall</span>
.end_macro

<span style="color: #5B6268;"># </span><span style="color: #5B6268;">print int</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">param(d): int register</span>
.macro print_int(%d)
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> %d
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">1</span>
    <span style="color: #51afef;">syscall</span>
.end_macro


<span style="color: #5B6268;"># </span><span style="color: #5B6268;">READ FILE </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">file_name: put a string literal</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">file_addr: put a register to store buffer address</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">len: put a register to store file length in </span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">max_len: put an int literal for max length of the string</span>
.macro read_file(%file_name<span style="color: #c678dd;">,</span> %file_addr<span style="color: #c678dd;">,</span> %len<span style="color: #c678dd;">,</span> %max_len)
.eqv FILE_READ <span style="color: #da8548; font-weight: bold;">0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">define constant</span>
<span style="color: #51afef; font-weight: bold;">.data</span> 
<span style="color: #c678dd;">filename:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> %file_name    
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">make sure u dont have another symbol called `buffer`</span>
<span style="color: #c678dd;">buffer:</span> <span style="color: #51afef; font-weight: bold;">.byte</span> <span style="color: #da8548; font-weight: bold;">0</span><span style="color: #c678dd;">:</span>%max_len 
<span style="color: #c678dd;">file_open_err_str:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"[ERROR]: error opening "</span>
<span style="color: #c678dd;">file_read_err_str:</span> <span style="color: #51afef; font-weight: bold;">.asciiz</span> <span style="color: #98be65;">"[ERROR]: error reading "</span>
<span style="color: #51afef; font-weight: bold;">.text</span>
    <span style="color: #51afef;">j</span> macro_body <span style="color: #5B6268;"># </span><span style="color: #5B6268;">skip error printing</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">error handling area </span>
<span style="color: #c678dd;">file_open_err:</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> file_open_err_str
    <span style="color: #51afef;">j</span> print_err
<span style="color: #c678dd;">file_read_err:</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> file_read_err_str 
    <span style="color: #51afef;">j</span> print_err
<span style="color: #c678dd;">print_err:</span> 
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #51afef;">syscall</span> 

    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">4</span> 
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> filename
    <span style="color: #51afef;">syscall</span> 

    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">11</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> '\n'
    <span style="color: #51afef;">syscall</span>

    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">10</span> 
    <span style="color: #51afef;">syscall</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">macro code starts here</span>
<span style="color: #c678dd;">macro_body:</span> 
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">open file </span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">13</span>
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a1</span><span style="color: #c678dd;">,</span> FILE_READ
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> filename
    <span style="color: #51afef;">syscall</span> 

    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$zero</span><span style="color: #c678dd;">,</span> file_open_err <span style="color: #5B6268;"># </span><span style="color: #5B6268;">assert file open</span>

    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">read file </span>
    <span style="color: #dcaeea;">move</span> <span style="color: #ECBE7B;">$a0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span> 
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #da8548; font-weight: bold;">14</span>
    <span style="color: #dcaeea;">la</span> <span style="color: #ECBE7B;">$a1</span><span style="color: #c678dd;">,</span> buffer
    <span style="color: #dcaeea;">li</span> <span style="color: #ECBE7B;">$a2</span><span style="color: #c678dd;">,</span> %max_len
    <span style="color: #51afef;">syscall</span> 
    <span style="color: #dcaeea;">move</span> %len<span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$v0</span> <span style="color: #5B6268;"># </span><span style="color: #5B6268;">len in %len</span>
    <span style="color: #dcaeea;">la</span> %file_addr<span style="color: #c678dd;">,</span> buffer <span style="color: #5B6268;"># </span><span style="color: #5B6268;">load string addr to buffer</span>
    <span style="color: #5B6268;"># </span><span style="color: #5B6268;">assert file open</span>
    <span style="color: #dcaeea;">blt</span> <span style="color: #ECBE7B;">$v0</span><span style="color: #c678dd;">,</span> <span style="color: #ECBE7B;">$zero</span><span style="color: #c678dd;">,</span> file_read_err 
.end_macro


<span style="color: #5B6268;"># </span><span style="color: #ECBE7B; font-weight: bold;">TODO:</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">- for loop (maybe?)</span>
</pre>
</div>
</div>
</div>
</div>
</div>
</body>
</html>